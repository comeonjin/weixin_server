webpackJsonp([1],{"3ojL":function(t,e,n){t.exports=n.p+"static/img/afterbg.8816c10.jpg"},COqg:function(t,e){},CW1X:function(t,e){},IwFi:function(t,e){},LK0c:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("MVMM"),i={baseUrl:"http://www.dadiandesign.com",bus:new a.a},s={props:{nickname:{type:String,required:!0},isHistory:{type:Boolean,required:!0},openId:{type:String,required:!0}},data:function(){return{}},mounted:function(){},methods:{handleHistoryClick:function(){this.$emit("rightClick",!0),this.$router.push("/history/"+this.openId)},handleGoback:function(){this.$router.go(-1),this.$emit("rightClick",!1)}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-container"},[t.isHistory?t._e():n("div",{staticClass:"nickname"},[n("span",{staticClass:"point"}),t._v(" "),n("span",[t._v(t._s(t.nickname))])]),t._v(" "),t.isHistory?n("span",{staticClass:"historyTitle"},[t._v("历史竞猜")]):t._e(),t._v(" "),t.isHistory?n("div",{staticClass:"goback",on:{click:t.handleGoback}},[n("span",[t._v("< 返回")])]):n("div",{staticClass:"history",on:{click:t.handleHistoryClick}},[n("span",{staticClass:"point"}),t._v(" "),n("span",[t._v("我的竞猜")])])])},staticRenderFns:[]};var o=n("vSla")(s,r,!1,function(t){n("CW1X")},"data-v-2ead16ed",null).exports,c=n("aozt"),l=n.n(c),u={props:{arg:{type:Object,required:!0}},data:function(){return{}},mounted:function(){},methods:{handleAlertviewClick:function(){this.$emit("stateChange",!1),void 0!==this.arg.callback&&this.arg.callback()}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.arg.alertFlag?n("div",{staticClass:"alertview"},[n("div",{staticClass:"title"},[t._v("\n        提示\n    ")]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(t.arg.alertcontent))]),t._v(" "),n("button",{staticClass:"confirm",on:{click:t.handleAlertviewClick}},[t._v("确定")])]):t._e()},staticRenderFns:[]};var h=n("vSla")(u,d,!1,function(t){n("COqg")},"data-v-6aef2e90",null).exports,p={name:"App",data:function(){return{code:"",nickname:"",openId:"",headimgurl:"",isHistory:!1,show:!1,arg:{alertFlag:!1,alertcontent:""}}},components:{Header:o,AlertView:h},created:function(){this.onBusHistroy()},mounted:function(){var t=this;this.code=this.$route.query.code,l.a.get(i.baseUrl+"/request",{params:{code:this.code}}).then(function(e){e.data.errcode||2e3===e.data.status?t.formateArguments({alertFlag:!0,alertcontent:"页面授权已过期，请重新进入",callback:function(){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxd55316e683616eda&redirect_uri=http://www.dadiandesign.com/activity&response_type=code&scope=snsapi_userinfo&state=state123#wechat_redirect"}}):(t.nickname=e.data.nickname,t.openId=e.data.openid,t.headimgurl=e.data.headimgurl)}).catch(function(t){console.log(t)})},methods:{handRightClick:function(t){this.isHistory=t},onBusHistroy:function(){var t=this;i.bus.$on("history",function(e){t.isHistory=e})},formateArguments:function(t){this.arg=Object.assign(this.arg,t)},handleStateChange:function(t){this.arg.alertFlag=t}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("AlertView",{attrs:{arg:t.arg},on:{stateChange:t.handleStateChange}}),t._v(" "),n("Header",{attrs:{nickname:t.nickname,openId:t.openId,isHistory:t.isHistory},on:{rightClick:t.handRightClick}}),t._v(" "),n("router-view",{staticClass:"animated",attrs:{nickname:t.nickname,openId:t.openId,headimgurl:t.headimgurl}})],1)},staticRenderFns:[]};var m=n("vSla")(p,f,!1,function(t){n("Rsgu")},null,null).exports,g=n("zO6J"),v={props:{nickname:{type:String,required:!0},openId:{type:String,required:!0}},data:function(){return{qList:["1、明显是一只法牛啊。","2、应该是一只柯基啦。","3、绝对是一只贵宾犬。","4、以上答案都不正确。"],qId:"谁是LULU?",answerIndex:null,answer:"",arg:{alertFlag:!1,alertcontent:""}}},components:{AlertView:h},computed:{},created:function(){i.bus.$emit("history",!1)},mounted:function(){console.log(this.nickname,this.openId)},methods:{handleClick:function(t,e){this.answerIndex=t,this.answer=e.split("、")[1]},handleSubmit:function(){var t=this;if(null!==this.answerIndex)if(""!==this.nickname&&void 0!==this.nickname&&""!==this.openId&&void 0!==this.openId){var e=i.baseUrl+"/user_answer";l.a.get(e,{params:{qId:this.qId,answer:this.answer,openId:this.openId,nickname:this.nickname}}).then(function(e){1e3===e.data.status&&t.formateArguments({alertFlag:!0,alertcontent:e.data.message}),0===e.data.status?t.formateArguments({alertFlag:!0,alertcontent:"您已经提交过答案!",callback:function(){t.$router.push("/after")}}):t.formateArguments({alertFlag:!0,alertcontent:e.data.message,callback:function(){t.$router.push("/after")}})}).catch(function(t){console.log(t)})}else this.formateArguments({alertFlag:!0,alertcontent:"页面正在加载请稍后再提交!"});else this.formateArguments({alertFlag:!0,alertcontent:"请选择答案后提交!"})},formateArguments:function(t){this.arg=Object.assign(this.arg,t)},handleStateChange:function(t){this.arg.alertFlag=t}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"before-container"},[n("AlertView",{attrs:{arg:t.arg},on:{stateChange:t.handleStateChange}}),t._v(" "),n("div",{staticClass:"mainbox"},[t._l(t.qList,function(e,a){return n("div",{key:a,staticClass:"button-container",on:{click:function(n){t.handleClick(a,e)}}},[n("button",{class:{actived:a===t.answerIndex}},[t._v("\n                "+t._s(e)+"\n                "),a===t.answerIndex?n("span"):t._e()])])}),t._v(" "),n("button",{staticClass:"submit",on:{click:t.handleSubmit}},[t._v("\n            提交\n        ")])],2)],1)},staticRenderFns:[]};var C=n("vSla")(v,_,!1,function(t){n("LK0c"),n("zQCr")},"data-v-2406cb0d",null).exports,y={data:function(){return{}},created:function(){i.bus.$emit("history",!1)}},k={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"after-container"},[e("img",{attrs:{src:n("3ojL"),alt:""}})])}]};var w=n("vSla")(y,k,!1,function(t){n("hDIw")},"data-v-fb388768",null).exports,b={props:{headimgurl:{type:String}},data:function(){return{openId:"",historyList:[]}},created:function(){i.bus.$emit("history",!0)},mounted:function(){this.openId=this.$route.params.openId,this.requestHistory()},beforeDestroy:function(){i.bus.$emit("history",!1)},methods:{requestHistory:function(){var t=this,e=i.baseUrl+"/user_history";l.a.get(e,{params:{openId:this.openId}}).then(function(e){t.historyList=e.data.history}).catch(function(t){console.log(t)})}}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},t._l(t.historyList,function(e){return n("div",{key:e.ansTime,staticClass:"history"},[n("div",{staticClass:"left"},[n("img",{attrs:{src:t.headimgurl,alt:"touxiang"}})]),t._v(" "),n("div",{staticClass:"right"},[n("li",[n("span",{staticClass:"hisTitle"},[t._v("答题时间：  ")]),t._v(t._s(e.ansTime))]),t._v(" "),n("li",[n("span",{staticClass:"hisTitle"},[t._v("已答题目：")]),t._v(" "+t._s(e.qId))]),t._v(" "),n("li",[n("span",{staticClass:"hisTitle"},[t._v("所选答案：")]),t._v(" "+t._s(e.ans))])])])}))},staticRenderFns:[]};var $=n("vSla")(b,I,!1,function(t){n("IwFi")},"data-v-82e545c0",null).exports;a.a.use(g.a);var q=new g.a({routes:[{path:"/",name:"Before",component:C},{path:"/after",name:"After",component:w},{path:"/history/:openId",name:"ComHistory",component:$}]});n("D0oh");a.a.config.productionTip=!1,new a.a({el:"#app",router:q,components:{App:m},template:"<App/>"})},Rsgu:function(t,e){},hDIw:function(t,e){},zQCr:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d3eeb0cacf3771cd7d69.js.map